<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>📂 Repo Browser</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
    h1 { color: #0f0; }
    label { display: block; margin: 8px 0 4px; }
    input { padding: 6px; border-radius: 4px; border: 1px solid #333; background: #222; color: #0f0; }
    button { margin-top: 12px; padding: 8px 14px; background: #0f0; color: #111; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #0c0; }
    ul { list-style: none; padding: 0; }
    li { margin: 6px 0; }
    a { color: #0ff; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .config { margin-bottom: 20px; padding: 12px; background: #222; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>📂 Repo Browser</h1>

  <!-- GUI controls -->
  <div class="config">
    <label>GitHub User:</label>
    <input id="user" type="text" value="octocat">
    <label>Repository:</label>
    <input id="repo" type="text" value="Hello-World">
    <label>Branch:</label>
    <input id="branch" type="text" value="main">
    <button onclick="load()">Load Repo</button>
  </div>

  <ul id="file-list">Enter info and click "Load Repo"</ul>

  <script>
    async function load() {
      const user   = document.getElementById("user").value;
      const repo   = document.getElementById("repo").value;
      const branch = document.getElementById("branch").value;

      const apiUrl = `https://api.github.com/repos/${user}/${repo}/contents/?ref=${branch}`;
      const list = document.getElementById("file-list");
      list.innerHTML = "Loading...";

      try {
        const res = await fetch(apiUrl);
        if (!res.ok) throw new Error("GitHub API error");
        const files = await res.json();

        list.innerHTML = "";
        files.forEach(file => {
          const li = document.createElement("li");
          if (file.type === "file") {
            const rawUrl = `https://raw.githubusercontent.com/${user}/${repo}/${branch}/${file.path}`;
            const customRaw = `raw.html?user=${user}&repo=${repo}&branch=${branch}&file=${encodeURIComponent(file.path)}`;
            li.innerHTML = `📄 ${file.name} — <a href="${rawUrl}" target="_blank">Raw</a> | <a href="${customRaw}" target="_blank">/raw</a>`;
          } else if (file.type === "dir") {
            li.innerHTML = `📂 ${file.name}`;
          }
          list.appendChild(li);
        });
      } catch (err) {
        list.innerHTML = `<li>❌ Error: ${err.message}</li>`;
      }
    }
  </script>
</body>
</html>
